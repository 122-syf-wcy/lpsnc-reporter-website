# 六盘水师范学院计算机科学学院记者团官网 - 完整框架配置指南

## 🎯 项目技术栈总览

### 核心架构
```
Frontend Framework: Hugo + Tailwind CSS + JavaScript
Backend: 无需后端 (纯静态网站)
Database: localStorage (客户端存储)
Deployment: 静态网站托管 (GitHub Pages/Netlify/Vercel)
```

## 📦 完整依赖安装

### 1️⃣ 系统环境要求
```bash
# 必需软件版本
Node.js >= 16.0.0    # JavaScript 运行时
Hugo >= 0.148.2      # 静态网站生成器 (扩展版本)
Git >= 2.0.0         # 版本控制
PowerShell/Bash      # 命令行工具

# 推荐版本
Node.js: v18.17.0 或更高
Hugo: v0.148.2-extended
```

### 2️⃣ Hugo 安装 (多种方式)

**Windows (推荐使用 Chocolatey):**
```powershell
# 方法1: Chocolatey
choco install hugo-extended

# 方法2: Scoop
scoop install hugo-extended

# 方法3: 手动下载
# 下载地址: https://github.com/gohugoio/hugo/releases
# 选择: hugo_extended_0.148.2_windows-amd64.zip
```

**macOS:**
```bash
# Homebrew
brew install hugo

# MacPorts  
sudo port install hugo
```

**Linux:**
```bash
# Ubuntu/Debian
sudo apt install hugo

# CentOS/RHEL
sudo yum install hugo

# Arch Linux
sudo pacman -S hugo
```

### 3️⃣ Node.js 依赖安装
```bash
# 进入项目目录
cd "C:\Users\舒\Desktop\记者团官网"

# 安装所有依赖
npm install

# 或者手动安装每个包
npm install --save-dev @tailwindcss/postcss@^4.1.11
npm install --save-dev autoprefixer@^10.4.21  
npm install --save-dev postcss@^8.5.6
npm install --save-dev postcss-cli@^11.0.1
npm install --save-dev tailwindcss@^4.1.11
```

## 🚀 开发环境配置

### 本地开发服务器
```bash
# 标准启动
hugo server

# 指定端口
hugo server --port 1314

# 开发模式 (包含草稿)
hugo server --buildDrafts --buildFuture

# 绑定所有网络接口
hugo server --bind 0.0.0.0 --baseURL http://192.168.1.100:1313
```

### 实时预览配置
```bash
# 快速渲染模式
hugo server --disableFastRender

# 完整重建模式  
hugo server --forceSyncStatic

# 详细日志
hugo server --verbose --debug
```

## 🏗️ 生产环境部署框架

### 1️⃣ 静态网站生成
```bash
# 生产环境构建
hugo --minify --gc

# 指定环境
hugo --environment production

# 清理并构建
hugo --cleanDestinationDir --gc --minify
```

### 2️⃣ 推荐部署平台

**GitHub Pages:**
```yaml
# .github/workflows/hugo.yml
name: Build and Deploy Hugo Site

on:
  push:
    branches: [ main ]

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Setup Hugo
      uses: peaceiris/actions-hugo@v2
      with:
        hugo-version: '0.148.2'
        extended: true
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
    - name: Install dependencies
      run: npm install
    - name: Build site
      run: hugo --minify --gc
    - name: Deploy to GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./public
```

**Netlify:**
```toml
# netlify.toml
[build]
  command = "hugo --gc --minify"
  publish = "public"

[build.environment]
  HUGO_VERSION = "0.148.2"
  NODE_VERSION = "18"

[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    X-Content-Type-Options = "nosniff"
    Cache-Control = "public, max-age=31536000"
```

**Vercel:**
```json
{
  "build": {
    "env": {
      "HUGO_VERSION": "0.148.2"
    }
  },
  "buildCommand": "hugo --gc --minify",
  "outputDirectory": "public",
  "installCommand": "npm install"
}
```

## 🛠️ 开发工具推荐

### 编辑器配置

**VS Code 扩展:**
```json
// .vscode/extensions.json
{
  "recommendations": [
    "bungcip.better-toml",           // TOML 语法支持
    "budparr.language-hugo-vscode",  // Hugo 语法高亮
    "bradlc.vscode-tailwindcss",     // Tailwind CSS 智能感知
    "ms-vscode.vscode-json",         // JSON 支持
    "yzhang.markdown-all-in-one",    // Markdown 增强
    "esbenp.prettier-vscode",        // 代码格式化
    "formulahendry.auto-rename-tag", // HTML 标签重命名
    "christian-kohler.path-intellisense" // 路径智能感知
  ]
}
```

**VS Code 设置:**
```json
// .vscode/settings.json
{
  "emmet.includeLanguages": {
    "hugo": "html"
  },
  "files.associations": {
    "*.html": "hugo"
  },
  "tailwindCSS.includeLanguages": {
    "hugo": "html"
  },
  "css.validate": false,
  "scss.validate": false
}
```

### 代码质量工具

**Prettier 配置:**
```json
// .prettierrc
{
  "printWidth": 100,
  "tabWidth": 2,
  "useTabs": false,
  "semi": true,
  "singleQuote": true,
  "quoteProps": "as-needed",
  "trailingComma": "es5",
  "bracketSpacing": true,
  "arrowParens": "avoid",
  "endOfLine": "lf"
}
```

**ESLint 配置:**
```json
// .eslintrc.json
{
  "env": {
    "browser": true,
    "es2021": true
  },
  "extends": ["eslint:recommended"],
  "parserOptions": {
    "ecmaVersion": "latest",
    "sourceType": "module"
  },
  "rules": {
    "no-unused-vars": "warn",
    "no-console": "warn",
    "prefer-const": "error"
  }
}
```

## 📈 扩展功能框架

### 1️⃣ CMS 内容管理 (可选)

**Netlify CMS:**
```yaml
# static/admin/config.yml
backend:
  name: git-gateway
  branch: main

media_folder: static/images
public_folder: /images

collections:
  - name: "news"
    label: "新闻"
    folder: "content/news"
    create: true
    slug: "{{year}}-{{slug}}"
    fields:
      - {label: "标题", name: "title", widget: "string"}
      - {label: "发布日期", name: "date", widget: "datetime"}
      - {label: "分类", name: "categories", widget: "list"}
      - {label: "标签", name: "tags", widget: "list"}
      - {label: "内容", name: "body", widget: "markdown"}
```

**Forestry.io (现已合并到TinaCMS):**
```yaml
# .forestry/settings.yml
new_page_extension: md
auto_deploy: false
admin_path: "/admin"
webhook_url: 
sections:
- type: directory
  path: content/news
  label: 新闻
  create: all
  match: "**/*"
```

### 2️⃣ 搜索功能增强

**Algolia Search:**
```javascript
// themes/lpsnc-reporter/assets/js/search.js
import algoliasearch from 'algoliasearch/lite';

const searchClient = algoliasearch('YOUR_APP_ID', 'YOUR_SEARCH_KEY');
const index = searchClient.initIndex('your_index_name');

// 搜索功能
async function search(query) {
  const { hits } = await index.search(query, {
    hitsPerPage: 10,
    attributesToRetrieve: ['title', 'content', 'url'],
    attributesToHighlight: ['title', 'content']
  });
  return hits;
}
```

**Lunr.js (本地搜索):**
```javascript
// 生成搜索索引
hugo --gc --minify --config config.toml,config-search.toml

// JavaScript 实现
import lunr from 'lunr';

// 中文分词支持
import 'lunr-languages/lunr.stemmer.support.js';
import 'lunr-languages/lunr.zh.js';
```

### 3️⃣ 评论系统升级

**Giscus (GitHub Discussions):**
```html
<!-- themes/lpsnc-reporter/layouts/partials/comments.html -->
<script src="https://giscus.app/client.js"
        data-repo="your-username/your-repo"
        data-repo-id="YOUR_REPO_ID"
        data-category="Comments"
        data-category-id="YOUR_CATEGORY_ID"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="light"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>
```

**Utterances (GitHub Issues):**
```html
<script src="https://utteranc.es/client.js"
        repo="your-username/your-repo"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
```

### 4️⃣ 分析工具

**Google Analytics 4:**
```javascript
// 已集成在 baseof.html 中
// 配置在 hugo.toml: googleAnalytics = "G-XXXXXXXXXX"
```

**百度统计:**
```html
<!-- themes/lpsnc-reporter/layouts/partials/baidu-analytics.html -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?YOUR_BAIDU_ID";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
```

## 🔧 性能优化框架

### 图片处理
```bash
# Hugo 内置图片处理
{{ $image := resources.Get "images/hero.jpg" }}
{{ $resized := $image.Resize "800x400 webp q90" }}
<img src="{{ $resized.RelPermalink }}" alt="Hero Image">
```

### CDN 加速
```toml
# hugo.toml
[params]
  cdnURL = "https://cdn.jsdelivr.net/gh/your-username/your-repo@main/static"
```

### PWA 支持
```json
// static/manifest.json
{
  "name": "六盘水师范学院计算机科学学院记者团",
  "short_name": "记者团",
  "description": "官方网站",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#1e3a8a",
  "theme_color": "#1e3a8a",
  "icons": [
    {
      "src": "/images/icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    }
  ]
}
```

## ⚡ 快速启动脚本

**Windows (PowerShell):**
```powershell
# start-dev.ps1
Write-Host "🚀 启动记者团官网开发服务器..." -ForegroundColor Green

# 检查 Hugo 是否安装
if (!(Get-Command "hugo" -ErrorAction SilentlyContinue)) {
    Write-Error "❌ Hugo 未安装，请先安装 Hugo"
    exit 1
}

# 检查 Node.js 是否安装
if (!(Get-Command "node" -ErrorAction SilentlyContinue)) {
    Write-Error "❌ Node.js 未安装，请先安装 Node.js"
    exit 1
}

# 安装依赖
Write-Host "📦 安装 Node.js 依赖..." -ForegroundColor Yellow
npm install

# 启动服务器
Write-Host "🌐 启动开发服务器..." -ForegroundColor Blue
hugo server --port 1314 --bind 127.0.0.1

Write-Host "✅ 服务器已启动！访问 http://localhost:1314" -ForegroundColor Green
```

**Linux/macOS (Bash):**
```bash
#!/bin/bash
# start-dev.sh

echo "🚀 启动记者团官网开发服务器..."

# 检查依赖
command -v hugo >/dev/null 2>&1 || { echo "❌ Hugo 未安装" >&2; exit 1; }
command -v node >/dev/null 2>&1 || { echo "❌ Node.js 未安装" >&2; exit 1; }

# 安装依赖
echo "📦 安装 Node.js 依赖..."
npm install

# 启动服务器
echo "🌐 启动开发服务器..."
hugo server --port 1314 --bind 127.0.0.1

echo "✅ 服务器已启动！访问 http://localhost:1314"
```

## 🐛 故障排除

### 常见问题解决

1. **Hugo 版本问题:**
```bash
# 检查版本
hugo version

# 需要扩展版本
hugo version | grep extended
```

2. **PostCSS 编译错误:**
```bash
# 清理缓存
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

3. **端口占用:**
```bash
# Windows
netstat -ano | findstr :1313
taskkill /PID <PID> /F

# Linux/macOS  
lsof -ti:1313 | xargs kill -9
```

4. **内存不足:**
```bash
# 增加 Node.js 内存限制
export NODE_OPTIONS="--max-old-space-size=4096"
```

## 📚 学习资源

- **Hugo 官方文档**: https://gohugo.io/documentation/
- **Tailwind CSS 文档**: https://tailwindcss.com/docs
- **PostCSS 插件**: https://postcss.org/docs/
- **JavaScript ES6+**: https://developer.mozilla.org/zh-CN/docs/Web/JavaScript
- **Git 版本控制**: https://git-scm.com/book/zh/v2

---

🎉 **恭喜！现在您已经掌握了记者团官网的完整技术栈！**

所有框架已配置完成，可以开始愉快的开发了！🚀