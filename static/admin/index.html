<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>è®°è€…å›¢å†…å®¹ç®¡ç†ç³»ç»Ÿ</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 8px;
      padding: 30px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      text-align: center;
      margin-bottom: 30px;
    }
    .news-section {
      margin-bottom: 40px;
    }
    .news-item {
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 20px;
      margin-bottom: 15px;
      background: #fafafa;
    }
    .news-title {
      font-size: 18px;
      font-weight: bold;
      color: #2c5aa0;
      margin-bottom: 10px;
    }
    .news-date {
      color: #666;
      font-size: 14px;
      margin-bottom: 10px;
    }
    .news-desc {
      color: #555;
      line-height: 1.5;
    }
    .add-btn {
      background-color: #2c5aa0;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      margin-bottom: 20px;
    }
    .add-btn:hover {
      background-color: #1e3f73;
    }
    .form-group {
      margin-bottom: 20px;
    }
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #333;
    }
    .form-group input, .form-group textarea, .form-group select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }
    .form-group textarea {
      height: 200px;
      resize: vertical;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      z-index: 1000;
    }
    .modal-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 30px;
      border-radius: 8px;
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
    }
    .btn-group {
      text-align: right;
      margin-top: 20px;
    }
    .btn {
      padding: 10px 20px;
      margin-left: 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    .btn-primary {
      background-color: #2c5aa0;
      color: white;
    }
    .btn-secondary {
      background-color: #6c757d;
      color: white;
    }
    .tab-navigation {
      display: flex;
      border-bottom: 2px solid #ddd;
      margin-bottom: 30px;
    }
    .tab-btn {
      background: none;
      border: none;
      padding: 15px 25px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      color: #666;
      border-bottom: 3px solid transparent;
      transition: all 0.3s ease;
    }
    .tab-btn.active {
      color: #2c5aa0;
      border-bottom-color: #2c5aa0;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    .dept-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }
    .dept-item {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      background: #f9f9f9;
    }
    .dept-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    .dept-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 15px;
      color: white;
    }
    .dept-name {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 5px;
    }
    .member-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }
    .member-item {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      background: #f9f9f9;
      text-align: center;
    }
    .member-avatar-mini {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      margin: 0 auto 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }
    .stat-item {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      background: #f9f9f9;
      text-align: center;
    }
    .stat-number {
      font-size: 36px;
      font-weight: bold;
      color: #2c5aa0;
      margin-bottom: 10px;
    }
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }
    .md-btn {
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      padding: 5px 10px;
      margin-right: 5px;
      margin-bottom: 5px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      transition: background-color 0.2s;
    }
    .md-btn:hover {
      background: #e9ecef;
    }
    .article-item {
      position: relative;
      padding: 20px;
      margin-bottom: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #fafafa;
      overflow: hidden;
    }
    .article-cover {
      width: 120px;
      height: 80px;
      object-fit: cover;
      border-radius: 6px;
      float: right;
      margin-left: 15px;
      border: 1px solid #ddd;
    }
    .article-content {
      overflow: hidden;
    }
    .article-no-cover {
      width: 100%;
    }
  </style>
</head>
<body>
  <div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
      <h1>ğŸ“° å…­ç›˜æ°´å¸ˆèŒƒå­¦é™¢è®¡ç®—æœºç§‘å­¦å­¦é™¢è®°è€…å›¢ - å†…å®¹ç®¡ç†ç³»ç»Ÿ</h1>
      <div style="display: flex; align-items: center; gap: 15px;">
        <span id="welcomeText" style="color: #666; font-size: 14px;"></span>
        <button onclick="logout()" style="background: #dc3545; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-size: 14px;">é€€å‡ºç™»å½•</button>
      </div>
    </div>
    
    <!-- æ ‡ç­¾é¡µå¯¼èˆª -->
    <div class="tab-navigation">
      <button class="tab-btn active" onclick="switchTab('news')">ğŸ“° æ–°é—»æ–‡ç« ç®¡ç†</button>
      <button class="tab-btn" onclick="switchTab('team')">ğŸ‘¥ è®°è€…å›¢é£é‡‡ç®¡ç†</button>
    </div>
    
    <!-- æ–°é—»æ–‡ç« ç®¡ç† -->
    <div id="news-tab" class="tab-content active">
      <div class="news-section">
        <h2>æ–°é—»æ–‡ç« ç®¡ç†</h2>
        <button class="add-btn" onclick="openAddModal()">+ æ·»åŠ æ–°æ–‡ç« </button>
        <div id="newsList">
          <!-- ç°æœ‰æ–‡ç« å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
      </div>
    </div>
    
    <!-- è®°è€…å›¢é£é‡‡ç®¡ç† -->
    <div id="team-tab" class="tab-content">
      <div class="news-section">
        <h2>ç»„ç»‡æ¶æ„ç®¡ç†</h2>
        <button class="add-btn" onclick="openDeptModal()">âœï¸ ç¼–è¾‘éƒ¨é—¨ä¿¡æ¯</button>
        <div id="deptList" class="dept-grid">
          <!-- éƒ¨é—¨ä¿¡æ¯å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
      </div>
      
      <div class="news-section">
        <h2>ä¼˜ç§€æˆå‘˜ç®¡ç†</h2>
        <button class="add-btn" onclick="openMemberModal()">ğŸ‘¤ ç¼–è¾‘æˆå‘˜ä¿¡æ¯</button>
        <div id="memberList" class="member-grid">
          <!-- ä¼˜ç§€æˆå‘˜å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
      </div>
      
      <div class="news-section">
        <h2>å›¢é˜Ÿæ•°æ®ç®¡ç†</h2>
        <button class="add-btn" onclick="openStatsModal()">ğŸ“Š ç¼–è¾‘ç»Ÿè®¡æ•°æ®</button>
        <div id="statsList" class="stats-grid">
          <!-- å›¢é˜Ÿæ•°æ®å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
      </div>
    </div>
  </div>

  <!-- æ·»åŠ /ç¼–è¾‘æ–‡ç« çš„æ¨¡æ€æ¡† -->
  <div id="articleModal" class="modal">
    <div class="modal-content">
      <h3 id="modalTitle">æ·»åŠ æ–°æ–‡ç« </h3>
      <form id="articleForm">
        <div class="form-group">
          <label for="title">æ ‡é¢˜ *</label>
          <input type="text" id="title" required>
        </div>
        <div class="form-group">
          <label for="date">å‘å¸ƒæ—¥æœŸ *</label>
          <input type="datetime-local" id="date" required>
        </div>
        <div class="form-group">
          <label for="description">ç®€çŸ­æè¿° *</label>
          <input type="text" id="description" required>
        </div>
        <div class="form-group">
          <label for="categories">åˆ†ç±»</label>
          <select id="categories">
            <option value="æ ¡å›­è¦é—»">æ ¡å›­è¦é—»</option>
            <option value="æ•™å­¦ç§‘ç ”">æ•™å­¦ç§‘ç ”</option>
            <option value="å›¢å­¦æ´»åŠ¨">å›¢å­¦æ´»åŠ¨</option>
          </select>
        </div>
        <div class="form-group">
          <label for="tags">æ ‡ç­¾ (ç”¨é€—å·åˆ†éš”)</label>
          <input type="text" id="tags" placeholder="ä¾‹å¦‚: å­¦æœ¯è®²åº§, äººå·¥æ™ºèƒ½">
        </div>
        <div class="form-group">
          <label for="cover">æ–‡ç« å°é¢</label>
          <input type="file" id="cover" accept="image/*" onchange="handleCoverUpload(event)">
          <div id="coverPreview" style="margin-top: 10px; display: none;">
            <img id="coverImage" style="max-width: 200px; max-height: 150px; border-radius: 8px; border: 1px solid #ddd;">
            <button type="button" onclick="removeCover()" style="margin-left: 10px; background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">ç§»é™¤å°é¢</button>
          </div>
        </div>
        <div class="form-group">
          <label for="body">æ–‡ç« å†…å®¹ (Markdownæ ¼å¼) *</label>
          <div style="margin-bottom: 10px;">
            <button type="button" onclick="insertMarkdown('**ç²—ä½“**')" class="md-btn">ç²—ä½“</button>
            <button type="button" onclick="insertMarkdown('*æ–œä½“*')" class="md-btn">æ–œä½“</button>
            <button type="button" onclick="insertMarkdown('# æ ‡é¢˜')" class="md-btn">æ ‡é¢˜</button>
            <button type="button" onclick="insertMarkdown('- åˆ—è¡¨é¡¹')" class="md-btn">åˆ—è¡¨</button>
            <button type="button" onclick="insertMarkdown('[é“¾æ¥æ–‡å­—](URL)')" class="md-btn">é“¾æ¥</button>
            <input type="file" id="imageUpload" accept="image/*" onchange="handleImageUpload(event)" style="display: none;">
            <button type="button" onclick="document.getElementById('imageUpload').click()" class="md-btn">ğŸ“· æ’å…¥å›¾ç‰‡</button>
          </div>
          <textarea id="body" required placeholder="è¯·è¾“å…¥Markdownæ ¼å¼çš„æ–‡ç« å†…å®¹...

ç¤ºä¾‹è¯­æ³•ï¼š
# æ ‡é¢˜
## äºŒçº§æ ‡é¢˜
**ç²—ä½“æ–‡å­—**
*æ–œä½“æ–‡å­—*
- åˆ—è¡¨é¡¹
[é“¾æ¥æ–‡å­—](é“¾æ¥åœ°å€)
![å›¾ç‰‡æè¿°](å›¾ç‰‡åœ°å€)

æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šæ–¹çš„å·¥å…·æ å¿«é€Ÿæ’å…¥æ ¼å¼ã€‚"></textarea>
          <div style="margin-top: 10px;">
            <label>
              <input type="checkbox" id="previewMode" onchange="togglePreview()">
              å®æ—¶é¢„è§ˆ
            </label>
          </div>
          <div id="markdownPreview" style="display: none; margin-top: 15px; padding: 15px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; max-height: 300px; overflow-y: auto;"></div>
        </div>
        <div class="btn-group">
          <button type="button" class="btn btn-secondary" onclick="closeModal()">å–æ¶ˆ</button>
          <button type="submit" class="btn btn-primary">ä¿å­˜æ–‡ç« </button>
        </div>
      </form>
    </div>
  </div>

  <!-- ç¼–è¾‘éƒ¨é—¨ä¿¡æ¯çš„æ¨¡æ€æ¡† -->
  <div id="deptModal" class="modal">
    <div class="modal-content">
      <h3>ç¼–è¾‘ç»„ç»‡æ¶æ„ä¿¡æ¯</h3>
      <form id="deptForm">
        <h4>æ–°é—»éƒ¨</h4>
        <div class="form-row">
          <div class="form-group">
            <label for="news_leader">éƒ¨é•¿å§“å</label>
            <input type="text" id="news_leader" value="å¼ åŒå­¦">
          </div>
          <div class="form-group">
            <label for="news_vice_leader">å‰¯éƒ¨é•¿å§“å</label>
            <input type="text" id="news_vice_leader" value="æåŒå­¦">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="news_members">æˆå‘˜æ•°é‡</label>
            <input type="number" id="news_members" value="12">
          </div>
          <div class="form-group">
            <label for="news_desc">éƒ¨é—¨æè¿°</label>
            <input type="text" id="news_desc" value="è´Ÿè´£æ–°é—»é‡‡å†™ã€é‡‡è®¿æŠ¥é“ç­‰æ ¸å¿ƒæ–°é—»ä¸šåŠ¡å·¥ä½œ">
          </div>
        </div>
        
        <h4>æ‘„å½±éƒ¨</h4>
        <div class="form-row">
          <div class="form-group">
            <label for="photo_leader">éƒ¨é•¿å§“å</label>
            <input type="text" id="photo_leader" value="ç‹åŒå­¦">
          </div>
          <div class="form-group">
            <label for="photo_vice_leader">å‰¯éƒ¨é•¿å§“å</label>
            <input type="text" id="photo_vice_leader" value="åˆ˜åŒå­¦">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="photo_members">æˆå‘˜æ•°é‡</label>
            <input type="number" id="photo_members" value="10">
          </div>
          <div class="form-group">
            <label for="photo_desc">éƒ¨é—¨æè¿°</label>
            <input type="text" id="photo_desc" value="è´Ÿè´£æ ¡å›­æ´»åŠ¨æ‘„å½±è®°å½•ã€å›¾ç‰‡æ–°é—»åˆ¶ä½œ">
          </div>
        </div>
        
        <h4>ç¼–è¾‘éƒ¨</h4>
        <div class="form-row">
          <div class="form-group">
            <label for="edit_leader">éƒ¨é•¿å§“å</label>
            <input type="text" id="edit_leader" value="å­™åŒå­¦">
          </div>
          <div class="form-group">
            <label for="edit_vice_leader">å‰¯éƒ¨é•¿å§“å</label>
            <input type="text" id="edit_vice_leader" value="å‘¨åŒå­¦">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="edit_members">æˆå‘˜æ•°é‡</label>
            <input type="number" id="edit_members" value="8">
          </div>
          <div class="form-group">
            <label for="edit_desc">éƒ¨é—¨æè¿°</label>
            <input type="text" id="edit_desc" value="è´Ÿè´£ç¨¿ä»¶ç¼–è¾‘ã€æ ¡å¯¹ã€æ’ç‰ˆç­‰åæœŸåˆ¶ä½œå·¥ä½œ">
          </div>
        </div>
        
        <h4>ç­–åˆ’éƒ¨</h4>
        <div class="form-row">
          <div class="form-group">
            <label for="plan_leader">éƒ¨é•¿å§“å</label>
            <input type="text" id="plan_leader" value="å´åŒå­¦">
          </div>
          <div class="form-group">
            <label for="plan_vice_leader">å‰¯éƒ¨é•¿å§“å</label>
            <input type="text" id="plan_vice_leader" value="éƒ‘åŒå­¦">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="plan_members">æˆå‘˜æ•°é‡</label>
            <input type="number" id="plan_members" value="6">
          </div>
          <div class="form-group">
            <label for="plan_desc">éƒ¨é—¨æè¿°</label>
            <input type="text" id="plan_desc" value="è´Ÿè´£æ´»åŠ¨ç­–åˆ’ã€ä¸“é¢˜åˆ¶ä½œã€åˆ›æ„å†…å®¹ç­‰ç­–åˆ’å·¥ä½œ">
          </div>
        </div>
        
        <div class="btn-group">
          <button type="button" class="btn btn-secondary" onclick="closeDeptModal()">å–æ¶ˆ</button>
          <button type="submit" class="btn btn-primary">ä¿å­˜æ›´æ”¹</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ç¼–è¾‘ä¼˜ç§€æˆå‘˜çš„æ¨¡æ€æ¡† -->
  <div id="memberModal" class="modal">
    <div class="modal-content">
      <h3>ç¼–è¾‘ä¼˜ç§€æˆå‘˜ä¿¡æ¯</h3>
      <form id="memberForm">
        <h4>å¼ åŒå­¦ (æ–°é—»éƒ¨éƒ¨é•¿)</h4>
        <div class="form-row">
          <div class="form-group">
            <label for="member1_name">å§“å</label>
            <input type="text" id="member1_name" value="å¼ åŒå­¦">
          </div>
          <div class="form-group">
            <label for="member1_position">èŒä½</label>
            <input type="text" id="member1_position" value="æ–°é—»éƒ¨éƒ¨é•¿">
          </div>
        </div>
        <div class="form-group">
          <label for="member1_desc">ä¸ªäººæè¿°</label>
          <textarea id="member1_desc">æ–°é—»å­¦ä¸“ä¸šï¼Œæ“…é•¿æ·±åº¦æŠ¥é“å’Œäººç‰©ä¸“è®¿ï¼Œæ›¾è·æ ¡çº§æ–°é—»ä½œå“ä¸€ç­‰å¥–ã€‚</textarea>
        </div>
        <div class="form-group">
          <label for="member1_tag">æ ‡ç­¾</label>
          <input type="text" id="member1_tag" value="ğŸ† æ–°é—»ä½œå“ä¸€ç­‰å¥–">
        </div>
        
        <h4>æåŒå­¦ (æ‘„å½±éƒ¨éƒ¨é•¿)</h4>
        <div class="form-row">
          <div class="form-group">
            <label for="member2_name">å§“å</label>
            <input type="text" id="member2_name" value="æåŒå­¦">
          </div>
          <div class="form-group">
            <label for="member2_position">èŒä½</label>
            <input type="text" id="member2_position" value="æ‘„å½±éƒ¨éƒ¨é•¿">
          </div>
        </div>
        <div class="form-group">
          <label for="member2_desc">ä¸ªäººæè¿°</label>
          <textarea id="member2_desc">è®¡ç®—æœºå­¦é™¢å­¦ç”Ÿï¼Œçƒ­çˆ±æ‘„å½±ï¼Œä½œå“å¤šæ¬¡åœ¨æ ¡å›­æ‘„å½±æ¯”èµ›ä¸­è·å¥–ã€‚</textarea>
        </div>
        <div class="form-group">
          <label for="member2_tag">æ ‡ç­¾</label>
          <input type="text" id="member2_tag" value="ğŸ“¸ æ‘„å½±æ¯”èµ›è·å¥–">
        </div>
        
        <h4>ç‹åŒå­¦ (ç¼–è¾‘éƒ¨éƒ¨é•¿)</h4>
        <div class="form-row">
          <div class="form-group">
            <label for="member3_name">å§“å</label>
            <input type="text" id="member3_name" value="ç‹åŒå­¦">
          </div>
          <div class="form-group">
            <label for="member3_position">èŒä½</label>
            <input type="text" id="member3_position" value="ç¼–è¾‘éƒ¨éƒ¨é•¿">
          </div>
        </div>
        <div class="form-group">
          <label for="member3_desc">ä¸ªäººæè¿°</label>
          <textarea id="member3_desc">ä¼ åª’å­¦é™¢å­¦ç”Ÿï¼Œç²¾é€šæ–‡å­—ç¼–è¾‘å’Œæ’ç‰ˆè®¾è®¡ï¼Œä½œå“ç¼–è¾‘è§„èŒƒã€‚</textarea>
        </div>
        <div class="form-group">
          <label for="member3_tag">æ ‡ç­¾</label>
          <input type="text" id="member3_tag" value="âœï¸ ç¼–è¾‘èƒ½æ‰‹">
        </div>
        
        <h4>é™ˆåŒå­¦ (ç­–åˆ’éƒ¨éƒ¨é•¿)</h4>
        <div class="form-row">
          <div class="form-group">
            <label for="member4_name">å§“å</label>
            <input type="text" id="member4_name" value="é™ˆåŒå­¦">
          </div>
          <div class="form-group">
            <label for="member4_position">èŒä½</label>
            <input type="text" id="member4_position" value="ç­–åˆ’éƒ¨éƒ¨é•¿">
          </div>
        </div>
        <div class="form-group">
          <label for="member4_desc">ä¸ªäººæè¿°</label>
          <textarea id="member4_desc">å¸‚åœºè¥é”€ä¸“ä¸šï¼Œå¯Œæœ‰åˆ›æ„æ€ç»´ï¼Œæ“…é•¿æ´»åŠ¨ç­–åˆ’å’Œä¸“é¢˜åˆ¶ä½œã€‚</textarea>
        </div>
        <div class="form-group">
          <label for="member4_tag">æ ‡ç­¾</label>
          <input type="text" id="member4_tag" value="ğŸ’¡ åˆ›æ„ç­–åˆ’å¸ˆ">
        </div>
        
        <div class="btn-group">
          <button type="button" class="btn btn-secondary" onclick="closeMemberModal()">å–æ¶ˆ</button>
          <button type="submit" class="btn btn-primary">ä¿å­˜æ›´æ”¹</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ç¼–è¾‘å›¢é˜Ÿæ•°æ®çš„æ¨¡æ€æ¡† -->
  <div id="statsModal" class="modal">
    <div class="modal-content">
      <h3>ç¼–è¾‘å›¢é˜Ÿç»Ÿè®¡æ•°æ®</h3>
      <form id="statsForm">
        <div class="form-row">
          <div class="form-group">
            <label for="team_members">å›¢é˜Ÿæˆå‘˜æ•°</label>
            <input type="number" id="team_members" value="36">
          </div>
          <div class="form-group">
            <label for="news_reports">æ–°é—»æŠ¥é“æ•°</label>
            <input type="text" id="news_reports" value="200+">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="awards">è·å¥–ä½œå“æ•°</label>
            <input type="text" id="awards" value="50+">
          </div>
          <div class="form-group">
            <label for="years">å¹´åº¦å†ç¨‹</label>
            <input type="number" id="years" value="5">
          </div>
        </div>
        
        <div class="btn-group">
          <button type="button" class="btn btn-secondary" onclick="closeStatsModal()">å–æ¶ˆ</button>
          <button type="submit" class="btn btn-primary">ä¿å­˜æ›´æ”¹</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // ç®€å•çš„æ–‡ç« ç®¡ç†ç³»ç»Ÿ
    let articles = [];
    let currentEditIndex = -1;

    // ç®€å•çš„Markdownè§£æå™¨
    function parseMarkdown(text) {
      if (!text) return '';
      
      return text
        // æ ‡é¢˜
        .replace(/^### (.*$)/gim, '<h3>$1</h3>')
        .replace(/^## (.*$)/gim, '<h2>$1</h2>')
        .replace(/^# (.*$)/gim, '<h1>$1</h1>')
        // ç²—ä½“å’Œæ–œä½“
        .replace(/\*\*(.*)\*\*/gim, '<strong>$1</strong>')
        .replace(/\*(.*)\*/gim, '<em>$1</em>')
        // é“¾æ¥
        .replace(/\[([^\]]*)\]\(([^\)]*)\)/gim, '<a href="$2" target="_blank">$1</a>')
        // å›¾ç‰‡
        .replace(/!\[([^\]]*)\]\(([^\)]*)\)/gim, '<img src="$2" alt="$1" style="max-width: 100%; height: auto; border-radius: 4px; margin: 10px 0;">')
        // åˆ—è¡¨
        .replace(/^\s*\n\*/gm, '\nâ€¢')
        .replace(/^\* (.+)/gim, '<li>$1</li>')
        .replace(/(<li>.*<\/li>)/s, '<ul>$1</ul>')
        // ä»£ç å—
        .replace(/`([^`]*)`/gim, '<code style="background: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-family: monospace;">$1</code>')
        // æ¢è¡Œ
        .replace(/\n/gim, '<br>');
    }

    // Markdownå·¥å…·æ åŠŸèƒ½
    function insertMarkdown(syntax) {
      const textarea = document.getElementById('body');
      const start = textarea.selectionStart;
      const end = textarea.selectionEnd;
      const selectedText = textarea.value.substring(start, end);
      
      let newText;
      if (syntax === '**ç²—ä½“**' && selectedText) {
        newText = `**${selectedText}**`;
      } else if (syntax === '*æ–œä½“*' && selectedText) {
        newText = `*${selectedText}*`;
      } else if (syntax === '# æ ‡é¢˜' && selectedText) {
        newText = `# ${selectedText}`;
      } else {
        newText = syntax;
      }
      
      textarea.value = textarea.value.substring(0, start) + newText + textarea.value.substring(end);
      textarea.focus();
      
      // æ›´æ–°é¢„è§ˆ
      if (document.getElementById('previewMode').checked) {
        updateMarkdownPreview();
      }
    }

    // åˆ‡æ¢é¢„è§ˆæ¨¡å¼
    function togglePreview() {
      const previewDiv = document.getElementById('markdownPreview');
      const isChecked = document.getElementById('previewMode').checked;
      
      if (isChecked) {
        previewDiv.style.display = 'block';
        updateMarkdownPreview();
        // ç›‘å¬è¾“å…¥å˜åŒ–
        document.getElementById('body').addEventListener('input', updateMarkdownPreview);
      } else {
        previewDiv.style.display = 'none';
        document.getElementById('body').removeEventListener('input', updateMarkdownPreview);
      }
    }

    // æ›´æ–°Markdowné¢„è§ˆ
    function updateMarkdownPreview() {
      const markdown = document.getElementById('body').value;
      const html = parseMarkdown(markdown);
      document.getElementById('markdownPreview').innerHTML = html;
    }

    // å¤„ç†å›¾ç‰‡ä¸Šä¼ 
    function handleImageUpload(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const imageUrl = e.target.result;
          const imageName = file.name;
          const markdownImg = `![${imageName}](${imageUrl})`;
          
          // æ’å…¥åˆ°å…‰æ ‡ä½ç½®
          const textarea = document.getElementById('body');
          const start = textarea.selectionStart;
          const end = textarea.selectionEnd;
          textarea.value = textarea.value.substring(0, start) + markdownImg + textarea.value.substring(end);
          
          // æ›´æ–°é¢„è§ˆ
          if (document.getElementById('previewMode').checked) {
            updateMarkdownPreview();
          }
          
          alert('å›¾ç‰‡å·²æ’å…¥åˆ°æ–‡ç« ä¸­ï¼');
        };
        reader.readAsDataURL(file);
      }
    }

    // å¤„ç†å°é¢ä¸Šä¼ 
    function handleCoverUpload(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const coverImage = document.getElementById('coverImage');
          const coverPreview = document.getElementById('coverPreview');
          
          coverImage.src = e.target.result;
          coverPreview.style.display = 'block';
        };
        reader.readAsDataURL(file);
      }
    }

    // ç§»é™¤å°é¢
    function removeCover() {
      document.getElementById('cover').value = '';
      document.getElementById('coverPreview').style.display = 'none';
      document.getElementById('coverImage').src = '';
    }

    // è®°è€…å›¢é£é‡‡æ•°æ®
    let teamData = {
      departments: {
        news: { name: 'æ–°é—»éƒ¨', englishName: 'News Department', leader: 'å¼ åŒå­¦', viceLeader: 'æåŒå­¦', members: 12, description: 'è´Ÿè´£æ–°é—»é‡‡å†™ã€é‡‡è®¿æŠ¥é“ç­‰æ ¸å¿ƒæ–°é—»ä¸šåŠ¡å·¥ä½œ' },
        photo: { name: 'æ‘„å½±éƒ¨', englishName: 'Photography Department', leader: 'ç‹åŒå­¦', viceLeader: 'åˆ˜åŒå­¦', members: 10, description: 'è´Ÿè´£æ ¡å›­æ´»åŠ¨æ‘„å½±è®°å½•ã€å›¾ç‰‡æ–°é—»åˆ¶ä½œ' },
        edit: { name: 'ç¼–è¾‘éƒ¨', englishName: 'Editorial Department', leader: 'å­™åŒå­¦', viceLeader: 'å‘¨åŒå­¦', members: 8, description: 'è´Ÿè´£ç¨¿ä»¶ç¼–è¾‘ã€æ ¡å¯¹ã€æ’ç‰ˆç­‰åæœŸåˆ¶ä½œå·¥ä½œ' },
        plan: { name: 'ç­–åˆ’éƒ¨', englishName: 'Planning Department', leader: 'å´åŒå­¦', viceLeader: 'éƒ‘åŒå­¦', members: 6, description: 'è´Ÿè´£æ´»åŠ¨ç­–åˆ’ã€ä¸“é¢˜åˆ¶ä½œã€åˆ›æ„å†…å®¹ç­‰ç­–åˆ’å·¥ä½œ' }
      },
      members: {
        member1: { name: 'å¼ åŒå­¦', position: 'æ–°é—»éƒ¨éƒ¨é•¿', description: 'æ–°é—»å­¦ä¸“ä¸šï¼Œæ“…é•¿æ·±åº¦æŠ¥é“å’Œäººç‰©ä¸“è®¿ï¼Œæ›¾è·æ ¡çº§æ–°é—»ä½œå“ä¸€ç­‰å¥–ã€‚', tag: 'ğŸ† æ–°é—»ä½œå“ä¸€ç­‰å¥–', color: 'blue' },
        member2: { name: 'æåŒå­¦', position: 'æ‘„å½±éƒ¨éƒ¨é•¿', description: 'è®¡ç®—æœºå­¦é™¢å­¦ç”Ÿï¼Œçƒ­çˆ±æ‘„å½±ï¼Œä½œå“å¤šæ¬¡åœ¨æ ¡å›­æ‘„å½±æ¯”èµ›ä¸­è·å¥–ã€‚', tag: 'ğŸ“¸ æ‘„å½±æ¯”èµ›è·å¥–', color: 'green' },
        member3: { name: 'ç‹åŒå­¦', position: 'ç¼–è¾‘éƒ¨éƒ¨é•¿', description: 'ä¼ åª’å­¦é™¢å­¦ç”Ÿï¼Œç²¾é€šæ–‡å­—ç¼–è¾‘å’Œæ’ç‰ˆè®¾è®¡ï¼Œä½œå“ç¼–è¾‘è§„èŒƒã€‚', tag: 'âœï¸ ç¼–è¾‘èƒ½æ‰‹', color: 'purple' },
        member4: { name: 'é™ˆåŒå­¦', position: 'ç­–åˆ’éƒ¨éƒ¨é•¿', description: 'å¸‚åœºè¥é”€ä¸“ä¸šï¼Œå¯Œæœ‰åˆ›æ„æ€ç»´ï¼Œæ“…é•¿æ´»åŠ¨ç­–åˆ’å’Œä¸“é¢˜åˆ¶ä½œã€‚', tag: 'ğŸ’¡ åˆ›æ„ç­–åˆ’å¸ˆ', color: 'orange' }
      },
      stats: {
        teamMembers: 36,
        newsReports: '200+',
        awards: '50+',
        years: 5
      }
    };

    // åŠ è½½ç°æœ‰æ–‡ç«  (æ¨¡æ‹Ÿ)
    function loadExistingArticles() {
      // è¿™é‡Œå¯ä»¥åŠ è½½ç°æœ‰çš„æ–‡ç« æ•°æ®
      articles = [
        {
          title: "ç¤ºä¾‹æ–‡ç« ï¼šäººå·¥æ™ºèƒ½æŠ€æœ¯è®²åº§æˆåŠŸä¸¾åŠ",
          date: "2025-01-15T14:00",
          description: "æˆ‘é™¢æˆåŠŸä¸¾åŠäººå·¥æ™ºèƒ½å‰æ²¿æŠ€æœ¯ä¸“é¢˜è®²åº§",
          categories: "æ•™å­¦ç§‘ç ”",
          tags: ["äººå·¥æ™ºèƒ½", "å­¦æœ¯è®²åº§"],
          cover: "", // å°é¢å›¾ç‰‡URL
          body: `# äººå·¥æ™ºèƒ½å‰æ²¿æŠ€æœ¯ä¸“é¢˜è®²åº§æˆåŠŸä¸¾åŠ

**æ—¶é—´**ï¼š2025å¹´1æœˆ15æ—¥ä¸‹åˆ14:00  
**åœ°ç‚¹**ï¼šå­¦æœ¯æŠ¥å‘Šå…  
**ä¸»é¢˜**ï¼šäººå·¥æ™ºèƒ½å‰æ²¿æŠ€æœ¯ä¸åº”ç”¨

![è®²åº§ç°åœº](/images/banners/banner4.jpg)

## è®²åº§æ¦‚å†µ

æˆ‘é™¢äº2025å¹´1æœˆ15æ—¥ä¸‹åˆåœ¨å­¦æœ¯æŠ¥å‘Šå…æˆåŠŸä¸¾åŠäº†äººå·¥æ™ºèƒ½å‰æ²¿æŠ€æœ¯ä¸“é¢˜è®²åº§ã€‚æœ¬æ¬¡è®²åº§ç‰¹é‚€ä¸šç•ŒçŸ¥åä¸“å®¶ï¼Œä¸ºå¸ˆç”Ÿä»¬å¸¦æ¥äº†ä¸€åœºç²¾å½©çš„å­¦æœ¯ç››å®´ã€‚

## ä¸»è¦å†…å®¹

- **æœºå™¨å­¦ä¹ ç®—æ³•**çš„æœ€æ–°å‘å±•
- **æ·±åº¦ç¥ç»ç½‘ç»œ**åœ¨å®é™…åº”ç”¨ä¸­çš„çªç ´
- **è‡ªç„¶è¯­è¨€å¤„ç†**æŠ€æœ¯çš„æœªæ¥å±•æœ›
- **è®¡ç®—æœºè§†è§‰**é¢†åŸŸçš„åˆ›æ–°åº”ç”¨

## å‚ä¸æƒ…å†µ

æœ¬æ¬¡è®²åº§å¸å¼•äº†æ¥è‡ªè®¡ç®—æœºç§‘å­¦å­¦é™¢ã€æ•°å­¦å­¦é™¢ç­‰å¤šä¸ªå­¦é™¢çš„å¸ˆç”Ÿå‚ä¸ï¼Œç°åœºåº§æ— è™šå¸­ã€‚

*æ„Ÿè°¢æ‰€æœ‰å‚ä¸è€…çš„çƒ­æƒ…æ”¯æŒï¼*`
        }
      ];
      renderArticles();
    }

    // æ¸²æŸ“æ–‡ç« åˆ—è¡¨
    function renderArticles() {
      const container = document.getElementById('newsList');
      if (articles.length === 0) {
        container.innerHTML = '<p style="text-align: center; color: #666;">æš‚æ— æ–‡ç« ï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ ç¬¬ä¸€ç¯‡æ–‡ç« ã€‚</p>';
        return;
      }

      container.innerHTML = articles.map((article, index) => {
        const hasCover = article.cover && article.cover.trim() !== '';
        
        return `
        <div class="article-item ${hasCover ? '' : 'article-no-cover'}">
          ${hasCover ? `<img src="${article.cover}" alt="æ–‡ç« å°é¢" class="article-cover">` : ''}
          <div class="article-content">
            <div class="news-title" style="font-size: 18px; font-weight: bold; color: #2c5aa0; margin-bottom: 8px;">${article.title}</div>
            <div class="news-date" style="color: #666; font-size: 14px; margin-bottom: 8px;">
              ğŸ“… ${formatDate(article.date)} | ğŸ“‚ ${article.categories}
              ${hasCover ? ' | ğŸ–¼ï¸ æœ‰å°é¢' : ' | ğŸ“„ æ— å°é¢'}
            </div>
            <div class="news-desc" style="color: #555; line-height: 1.4; margin-bottom: 10px;">${article.description}</div>
            <div style="margin-bottom: 10px;">
              ${article.tags.map(tag => `<span style="background: #e9ecef; color: #495057; padding: 2px 6px; border-radius: 12px; font-size: 12px; margin-right: 5px;">#${tag}</span>`).join('')}
            </div>
            <div style="margin-top: 15px; clear: both;">
              <button onclick="editArticle(${index})" style="background: #28a745; color: white; border: none; padding: 8px 15px; border-radius: 4px; margin-right: 10px; cursor: pointer; font-size: 14px;">âœï¸ ç¼–è¾‘</button>
              <button onclick="previewArticle(${index})" style="background: #17a2b8; color: white; border: none; padding: 8px 15px; border-radius: 4px; margin-right: 10px; cursor: pointer; font-size: 14px;">ğŸ‘ï¸ é¢„è§ˆ</button>
              <button onclick="deleteArticle(${index})" style="background: #dc3545; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; font-size: 14px;">ğŸ—‘ï¸ åˆ é™¤</button>
            </div>
          </div>
        </div>
      `;
      }).join('');
    }

    // æ ¼å¼åŒ–æ—¥æœŸ
    function formatDate(dateStr) {
      const date = new Date(dateStr);
      return date.toLocaleString('zh-CN');
    }

    // æ‰“å¼€æ·»åŠ æ–‡ç« æ¨¡æ€æ¡†
    function openAddModal() {
      currentEditIndex = -1;
      document.getElementById('modalTitle').textContent = 'æ·»åŠ æ–°æ–‡ç« ';
      document.getElementById('articleForm').reset();
      document.getElementById('date').value = new Date().toISOString().slice(0,16);
      
      // æ¸…ç†å°é¢é¢„è§ˆ
      document.getElementById('coverPreview').style.display = 'none';
      document.getElementById('coverImage').src = '';
      
      // æ¸…ç†Markdowné¢„è§ˆ
      document.getElementById('previewMode').checked = false;
      document.getElementById('markdownPreview').style.display = 'none';
      
      document.getElementById('articleModal').style.display = 'block';
    }

    // é¢„è§ˆæ–‡ç« 
    function previewArticle(index) {
      const article = articles[index];
      const previewWindow = window.open('', '_blank', 'width=800,height=600,scrollbars=yes');
      
      const previewContent = `
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="utf-8">
          <title>${article.title}</title>
          <style>
            body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6; }
            .cover { width: 100%; max-height: 300px; object-fit: cover; border-radius: 8px; margin-bottom: 20px; }
            .meta { color: #666; font-size: 14px; margin-bottom: 20px; }
            .content { color: #333; }
            h1 { color: #333; }
            h2 { color: #555; border-bottom: 1px solid #eee; padding-bottom: 10px; }
            h3 { color: #666; }
            img { max-width: 100%; height: auto; }
            code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; }
            .tag { background: #e9ecef; color: #495057; padding: 3px 8px; border-radius: 12px; font-size: 12px; margin-right: 5px; }
          </style>
        </head>
        <body>
          <h1>${article.title}</h1>
          <div class="meta">
            ğŸ“… ${formatDate(article.date)} | ğŸ“‚ ${article.categories} | 
            ${article.tags.map(tag => `<span class="tag">#${tag}</span>`).join('')}
          </div>
          ${article.cover ? `<img src="${article.cover}" alt="æ–‡ç« å°é¢" class="cover">` : ''}
          <div class="content">
            ${parseMarkdown(article.body)}
          </div>
        </body>
        </html>
      `;
      
      previewWindow.document.write(previewContent);
      previewWindow.document.close();
    }

    // ç¼–è¾‘æ–‡ç« 
    function editArticle(index) {
      currentEditIndex = index;
      const article = articles[index];
      document.getElementById('modalTitle').textContent = 'ç¼–è¾‘æ–‡ç« ';
      document.getElementById('title').value = article.title;
      document.getElementById('date').value = article.date;
      document.getElementById('description').value = article.description;
      document.getElementById('categories').value = article.categories;
      document.getElementById('tags').value = article.tags.join(', ');
      document.getElementById('body').value = article.body;
      
      // å¤„ç†å°é¢
      if (article.cover && article.cover.trim() !== '') {
        document.getElementById('coverImage').src = article.cover;
        document.getElementById('coverPreview').style.display = 'block';
      } else {
        document.getElementById('coverPreview').style.display = 'none';
      }
      
      document.getElementById('articleModal').style.display = 'block';
    }

    // åˆ é™¤æ–‡ç« 
    function deleteArticle(index) {
      if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ç¯‡æ–‡ç« å—ï¼Ÿ')) {
        articles.splice(index, 1);
        renderArticles();
        alert('æ–‡ç« å·²åˆ é™¤ï¼');
      }
    }

    // å…³é—­æ¨¡æ€æ¡†
    function closeModal() {
      document.getElementById('articleModal').style.display = 'none';
    }

    // ä¿å­˜æ–‡ç« 
    document.getElementById('articleForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const coverImage = document.getElementById('coverImage');
      const article = {
        title: document.getElementById('title').value,
        date: document.getElementById('date').value,
        description: document.getElementById('description').value,
        categories: document.getElementById('categories').value,
        tags: document.getElementById('tags').value.split(',').map(tag => tag.trim()).filter(tag => tag),
        cover: coverImage.src || '', // ä¿å­˜å°é¢å›¾ç‰‡
        body: document.getElementById('body').value
      };

      if (currentEditIndex >= 0) {
        articles[currentEditIndex] = article;
        alert('æ–‡ç« å·²æ›´æ–°ï¼');
      } else {
        articles.push(article);
        alert('æ–‡ç« å·²æ·»åŠ ï¼');
      }

      renderArticles();
      closeModal();
    });

    // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
    document.getElementById('articleModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeModal();
      }
    });

    // æ ‡ç­¾é¡µåˆ‡æ¢
    function switchTab(tabName) {
      // ç§»é™¤æ‰€æœ‰æ´»åŠ¨çŠ¶æ€
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      
      // æ¿€æ´»é€‰ä¸­çš„æ ‡ç­¾é¡µ
      event.target.classList.add('active');
      document.getElementById(tabName + '-tab').classList.add('active');
      
      if (tabName === 'team') {
        renderTeamData();
      }
    }

    // æ¸²æŸ“è®°è€…å›¢é£é‡‡æ•°æ®
    function renderTeamData() {
      renderDepartments();
      renderMembers();
      renderStats();
    }

    // æ¸²æŸ“éƒ¨é—¨ä¿¡æ¯
    function renderDepartments() {
      const container = document.getElementById('deptList');
      const deptIcons = {
        news: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" /></svg>',
        photo: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" /></svg>',
        edit: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>',
        plan: '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>'
      };
      const deptColors = {
        news: '#1e40af',
        photo: '#059669',
        edit: '#9333ea',
        plan: '#ea580c'
      };
      
      container.innerHTML = Object.entries(teamData.departments).map(([key, dept]) => `
        <div class="dept-item">
          <div class="dept-header">
            <div class="dept-icon" style="background-color: ${deptColors[key]};">
              ${deptIcons[key]}
            </div>
            <div>
              <div class="dept-name">${dept.name}</div>
              <div style="color: #666; font-size: 14px;">${dept.englishName}</div>
            </div>
          </div>
          <p style="margin-bottom: 15px; color: #555;">${dept.description}</p>
          <div style="font-size: 14px; color: #666;">
            <div><strong>éƒ¨é•¿ï¼š</strong>${dept.leader}</div>
            <div><strong>å‰¯éƒ¨é•¿ï¼š</strong>${dept.viceLeader}</div>
            <div><strong>æˆå‘˜ï¼š</strong>${dept.members}äºº</div>
          </div>
        </div>
      `).join('');
    }

    // æ¸²æŸ“ä¼˜ç§€æˆå‘˜ä¿¡æ¯
    function renderMembers() {
      const container = document.getElementById('memberList');
      const memberColors = {
        blue: '#1e40af',
        green: '#059669',
        purple: '#9333ea',
        orange: '#ea580c'
      };
      
      container.innerHTML = Object.entries(teamData.members).map(([key, member]) => `
        <div class="member-item">
          <div class="member-avatar-mini" style="background-color: ${memberColors[member.color]};">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
            </svg>
          </div>
          <h4 style="font-size: 18px; margin-bottom: 5px;">${member.name}</h4>
          <p style="color: ${memberColors[member.color]}; font-weight: bold; margin-bottom: 10px;">${member.position}</p>
          <p style="color: #555; font-size: 14px; line-height: 1.4; margin-bottom: 10px;">${member.description}</p>
          <span style="background: ${memberColors[member.color]}; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">${member.tag}</span>
        </div>
      `).join('');
    }

    // æ¸²æŸ“å›¢é˜Ÿæ•°æ®
    function renderStats() {
      const container = document.getElementById('statsList');
      const stats = [
        { label: 'å›¢é˜Ÿæˆå‘˜', value: teamData.stats.teamMembers },
        { label: 'æ–°é—»æŠ¥é“', value: teamData.stats.newsReports },
        { label: 'è·å¥–ä½œå“', value: teamData.stats.awards },
        { label: 'å¹´åº¦å†ç¨‹', value: teamData.stats.years }
      ];
      
      container.innerHTML = stats.map(stat => `
        <div class="stat-item">
          <div class="stat-number">${stat.value}</div>
          <div style="color: #666; font-weight: bold;">${stat.label}</div>
        </div>
      `).join('');
    }

    // ç¼–è¾‘éƒ¨é—¨ä¿¡æ¯
    function openDeptModal() {
      // åŠ è½½å½“å‰æ•°æ®åˆ°è¡¨å•
      document.getElementById('news_leader').value = teamData.departments.news.leader;
      document.getElementById('news_vice_leader').value = teamData.departments.news.viceLeader;
      document.getElementById('news_members').value = teamData.departments.news.members;
      document.getElementById('news_desc').value = teamData.departments.news.description;
      
      document.getElementById('photo_leader').value = teamData.departments.photo.leader;
      document.getElementById('photo_vice_leader').value = teamData.departments.photo.viceLeader;
      document.getElementById('photo_members').value = teamData.departments.photo.members;
      document.getElementById('photo_desc').value = teamData.departments.photo.description;
      
      document.getElementById('edit_leader').value = teamData.departments.edit.leader;
      document.getElementById('edit_vice_leader').value = teamData.departments.edit.viceLeader;
      document.getElementById('edit_members').value = teamData.departments.edit.members;
      document.getElementById('edit_desc').value = teamData.departments.edit.description;
      
      document.getElementById('plan_leader').value = teamData.departments.plan.leader;
      document.getElementById('plan_vice_leader').value = teamData.departments.plan.viceLeader;
      document.getElementById('plan_members').value = teamData.departments.plan.members;
      document.getElementById('plan_desc').value = teamData.departments.plan.description;
      
      document.getElementById('deptModal').style.display = 'block';
    }

    function closeDeptModal() {
      document.getElementById('deptModal').style.display = 'none';
    }

    // ç¼–è¾‘ä¼˜ç§€æˆå‘˜ä¿¡æ¯
    function openMemberModal() {
      // åŠ è½½å½“å‰æ•°æ®åˆ°è¡¨å•
      document.getElementById('member1_name').value = teamData.members.member1.name;
      document.getElementById('member1_position').value = teamData.members.member1.position;
      document.getElementById('member1_desc').value = teamData.members.member1.description;
      document.getElementById('member1_tag').value = teamData.members.member1.tag;
      
      document.getElementById('member2_name').value = teamData.members.member2.name;
      document.getElementById('member2_position').value = teamData.members.member2.position;
      document.getElementById('member2_desc').value = teamData.members.member2.description;
      document.getElementById('member2_tag').value = teamData.members.member2.tag;
      
      document.getElementById('member3_name').value = teamData.members.member3.name;
      document.getElementById('member3_position').value = teamData.members.member3.position;
      document.getElementById('member3_desc').value = teamData.members.member3.description;
      document.getElementById('member3_tag').value = teamData.members.member3.tag;
      
      document.getElementById('member4_name').value = teamData.members.member4.name;
      document.getElementById('member4_position').value = teamData.members.member4.position;
      document.getElementById('member4_desc').value = teamData.members.member4.description;
      document.getElementById('member4_tag').value = teamData.members.member4.tag;
      
      document.getElementById('memberModal').style.display = 'block';
    }

    function closeMemberModal() {
      document.getElementById('memberModal').style.display = 'none';
    }

    // ç¼–è¾‘å›¢é˜Ÿæ•°æ®
    function openStatsModal() {
      document.getElementById('team_members').value = teamData.stats.teamMembers;
      document.getElementById('news_reports').value = teamData.stats.newsReports;
      document.getElementById('awards').value = teamData.stats.awards;
      document.getElementById('years').value = teamData.stats.years;
      
      document.getElementById('statsModal').style.display = 'block';
    }

    function closeStatsModal() {
      document.getElementById('statsModal').style.display = 'none';
    }

    // ä¿å­˜éƒ¨é—¨ä¿¡æ¯
    document.getElementById('deptForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // æ›´æ–°æ•°æ®
      teamData.departments.news.leader = document.getElementById('news_leader').value;
      teamData.departments.news.viceLeader = document.getElementById('news_vice_leader').value;
      teamData.departments.news.members = parseInt(document.getElementById('news_members').value);
      teamData.departments.news.description = document.getElementById('news_desc').value;
      
      teamData.departments.photo.leader = document.getElementById('photo_leader').value;
      teamData.departments.photo.viceLeader = document.getElementById('photo_vice_leader').value;
      teamData.departments.photo.members = parseInt(document.getElementById('photo_members').value);
      teamData.departments.photo.description = document.getElementById('photo_desc').value;
      
      teamData.departments.edit.leader = document.getElementById('edit_leader').value;
      teamData.departments.edit.viceLeader = document.getElementById('edit_vice_leader').value;
      teamData.departments.edit.members = parseInt(document.getElementById('edit_members').value);
      teamData.departments.edit.description = document.getElementById('edit_desc').value;
      
      teamData.departments.plan.leader = document.getElementById('plan_leader').value;
      teamData.departments.plan.viceLeader = document.getElementById('plan_vice_leader').value;
      teamData.departments.plan.members = parseInt(document.getElementById('plan_members').value);
      teamData.departments.plan.description = document.getElementById('plan_desc').value;
      
      // æ›´æ–°æ€»æˆå‘˜æ•°
      teamData.stats.teamMembers = teamData.departments.news.members + teamData.departments.photo.members + teamData.departments.edit.members + teamData.departments.plan.members;
      
      renderTeamData();
      closeDeptModal();
      alert('éƒ¨é—¨ä¿¡æ¯å·²æ›´æ–°ï¼');
    });

    // ä¿å­˜ä¼˜ç§€æˆå‘˜ä¿¡æ¯
    document.getElementById('memberForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      teamData.members.member1.name = document.getElementById('member1_name').value;
      teamData.members.member1.position = document.getElementById('member1_position').value;
      teamData.members.member1.description = document.getElementById('member1_desc').value;
      teamData.members.member1.tag = document.getElementById('member1_tag').value;
      
      teamData.members.member2.name = document.getElementById('member2_name').value;
      teamData.members.member2.position = document.getElementById('member2_position').value;
      teamData.members.member2.description = document.getElementById('member2_desc').value;
      teamData.members.member2.tag = document.getElementById('member2_tag').value;
      
      teamData.members.member3.name = document.getElementById('member3_name').value;
      teamData.members.member3.position = document.getElementById('member3_position').value;
      teamData.members.member3.description = document.getElementById('member3_desc').value;
      teamData.members.member3.tag = document.getElementById('member3_tag').value;
      
      teamData.members.member4.name = document.getElementById('member4_name').value;
      teamData.members.member4.position = document.getElementById('member4_position').value;
      teamData.members.member4.description = document.getElementById('member4_desc').value;
      teamData.members.member4.tag = document.getElementById('member4_tag').value;
      
      renderTeamData();
      closeMemberModal();
      alert('ä¼˜ç§€æˆå‘˜ä¿¡æ¯å·²æ›´æ–°ï¼');
    });

    // ä¿å­˜å›¢é˜Ÿæ•°æ®
    document.getElementById('statsForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      teamData.stats.teamMembers = parseInt(document.getElementById('team_members').value);
      teamData.stats.newsReports = document.getElementById('news_reports').value;
      teamData.stats.awards = document.getElementById('awards').value;
      teamData.stats.years = parseInt(document.getElementById('years').value);
      
      renderTeamData();
      closeStatsModal();
      alert('å›¢é˜Ÿæ•°æ®å·²æ›´æ–°ï¼');
    });

    // æ£€æŸ¥ç™»å½•çŠ¶æ€
    function checkLoginStatus() {
      const loginStatus = localStorage.getItem('admin_logged_in');
      const loginTime = localStorage.getItem('admin_login_time');
      const username = localStorage.getItem('admin_username');
      
      if (loginStatus !== 'true' || !loginTime) {
        // æœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢
        window.location.href = '/admin/login.html';
        return false;
      }
      
      const now = new Date().getTime();
      const loginTimeMs = parseInt(loginTime);
      
      // æ£€æŸ¥ç™»å½•æ˜¯å¦è¿‡æœŸï¼ˆ24å°æ—¶ï¼‰
      if (now - loginTimeMs > 24 * 60 * 60 * 1000) {
        // ç™»å½•è¿‡æœŸï¼Œæ¸…é™¤çŠ¶æ€å¹¶è·³è½¬åˆ°ç™»å½•é¡µé¢
        localStorage.removeItem('admin_logged_in');
        localStorage.removeItem('admin_login_time');
        localStorage.removeItem('admin_username');
        window.location.href = '/admin/login.html';
        return false;
      }
      
      // æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
      if (username) {
        document.getElementById('welcomeText').textContent = `æ¬¢è¿å›æ¥ï¼Œ${username}`;
      }
      
      return true;
    }

    // é€€å‡ºç™»å½•
    function logout() {
      if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
        localStorage.removeItem('admin_logged_in');
        localStorage.removeItem('admin_login_time');
        localStorage.removeItem('admin_username');
        window.location.href = '/admin/login.html';
      }
    }

    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
      // é¦–å…ˆæ£€æŸ¥ç™»å½•çŠ¶æ€
      if (!checkLoginStatus()) {
        return; // å¦‚æœæœªç™»å½•ï¼Œç›´æ¥è¿”å›ï¼ˆé¡µé¢ä¼šè·³è½¬ï¼‰
      }
      
      // ç™»å½•éªŒè¯é€šè¿‡ï¼Œåˆå§‹åŒ–é¡µé¢
      loadExistingArticles();
      renderTeamData();
    });
  </script>
</body>
</html>