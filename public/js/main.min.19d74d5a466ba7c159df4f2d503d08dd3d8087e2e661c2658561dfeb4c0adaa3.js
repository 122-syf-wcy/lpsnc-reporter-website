document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("mobile-menu-button"),n=document.getElementById("mobile-menu"),s=document.getElementById("search-button"),o=document.getElementById("mobile-search-button"),e=document.getElementById("search-container");t&&n&&t.addEventListener("click",function(){n.classList.toggle("hidden")}),s&&e&&s.addEventListener("click",function(){if(e.classList.toggle("hidden"),!e.classList.contains("hidden")){const e=document.getElementById("search-input");e&&e.focus()}}),o&&e&&o.addEventListener("click",function(){if(e.classList.toggle("hidden"),!e.classList.contains("hidden")){const e=document.getElementById("search-input");e&&e.focus()}});const i=document.getElementById("search-form");if(i&&i.addEventListener("submit",function(e){e.preventDefault();const t=document.getElementById("search-input");if(t&&t.value.trim()){const e=encodeURIComponent(t.value+" site:"+window.location.hostname);window.open("https://www.google.com/search?q="+e,"_blank")}}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})}),document.querySelectorAll(".news-card").forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transform="translateY(-5px)"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0)"})}),"IntersectionObserver"in window){const e=new IntersectionObserver((t)=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target;n.src=n.dataset.src,n.classList.remove("lazy"),e.unobserve(n)}})});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)})}document.querySelectorAll("img").forEach(e=>{e.addEventListener("error",function(){this.dataset.fallbackApplied||(this.dataset.fallbackApplied="true",this.src="https://via.placeholder.com/400x200.png/3B82F6/FFFFFF?text=图片加载失败",this.alt="图片加载失败")})});const a=document.querySelectorAll(".loading");a.forEach(e=>{setTimeout(()=>{e.classList.add("loaded")},100)}),window.addEventListener("load",function(){document.body.classList.add("page-loaded")})}),window.addEventListener("scroll",function(){const t=window.pageYOffset||document.documentElement.scrollTop,e=document.getElementById("back-to-top");e&&(t>300?(e.style.display="block",e.style.opacity="1"):(e.style.opacity="0",setTimeout(()=>{e.style.opacity==="0"&&(e.style.display="none")},300)))}),document.addEventListener("DOMContentLoaded",function(){const e=document.createElement("button");e.id="back-to-top",e.innerHTML="↑",e.className="fixed bottom-6 right-6 bg-primary-blue text-white w-12 h-12 rounded-full shadow-lg hover:bg-blue-800 transition-all duration-300 z-50",e.style.display="none",e.style.opacity="0",e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),document.body.appendChild(e)});function shareToWeChat(){copyToClipboard(),alert("链接已复制到剪贴板，请在微信中粘贴分享")}function shareToWeibo(){const e=document.title,t=encodeURIComponent(window.location.href),n=encodeURIComponent(e);window.open(`https://service.weibo.com/share/share.php?url=${t}&title=${n}`,"_blank","width=600,height=400")}function copyToClipboard(){const e=window.location.href;if(navigator.clipboard)navigator.clipboard.writeText(e).then(()=>{showNotification("链接已复制到剪贴板")});else{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),showNotification("链接已复制到剪贴板")}}function showNotification(e){const t=document.createElement("div");t.className="fixed top-4 right-4 bg-primary-blue text-white px-4 py-2 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.style.transform="translateX(0)"},100),setTimeout(()=>{t.style.transform="translateX(full)",setTimeout(()=>{document.body.removeChild(t)},300)},3e3)}